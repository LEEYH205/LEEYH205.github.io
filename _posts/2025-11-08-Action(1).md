---
title: "Action(1)"
date: 2025-11-08 15:40:00 +0900
categories: [ROBOTICS]
tags: [Robotics, Action]
description: ""
pin: false
math: false
mermaid: false
hidden: true
---

# Action이란?

- **장기 실행 작업**을 위해 설계된 비동기 통신 방식

- 액션은 Client와 Server로 구성
    - Action Server : 특정 액션을 제공하는 노드
    - Action Client : 액션을 요청하는 노드

- 액션에서 사용하는 세 가지 메시지 요청
    - Goal : Action Client가 Server에 요청하는 작업의 목표
    - Feedback : 작업이 진행 중일 때, Action Server가 Action Client에게 전달하는 중간 상태 정보
        - ex) 주행 남은 시간, 현재 좌표, 현재 속도 등
    - Result : 작업이 완료되면, Action Server가 Action Client에 반환하는 최종 결과
        - ex) 주행 최종 시간 등

동작이 빨리 끝나는게 아니라 특정 작업에 대해서 길어질 것 같으면, 액션으로 하면 좋다.
왜냐하면, 중간에 Feedback을 받을 수 있기 때문.


## 작동 원리
    - 액션 클라이언트가 Goal을 보내면, 액션 서버가 작업을 수행하면서
중간 중간 Feedback을 클라이언트에게 전송
    - 작업이 완료되면 액션 서버는 최종 Result를 액션 클라이언트에게 전달
    - 작업이 실행 중일 때, 액션 클라이언트가 원하면 작업 취소 가능

## 특징
    - 비동기적 처리
    - 진행 중인 작업 취소 가능
    - 피드백을 통한 진행 상황 모니터링


---
복습

Interface 란?
- ROS2에서 노드 간에 주고받는 데이터의 구조를 정의
- Interface는 .msg, .srv, .action 확장자를 가진 텍스트 파일로 정의
- 메시지 (msg): Topic을 통한 단방향 통신에 사용
- 서비스 (srv): 요청-응답 모델의 양방향 통신에 사용
- 액션 (action): 장기 실행 작업을 위한 비동기 양방향 통신에 사용

---

## Interface Type 정의: Action

• 액션(Action)은 장시간 지속되는 작업을 수행할 때 사용되며, 중간에
상태를 모니터링하거나 작업을 중단할 수 있는 구조

• 주로 로봇이 특정 작업을 수행하는 동안 그 진행 상태를
모니터링하거나 취소할 수 있는 작업에 적합

• 액션 파일(.action)은 목표(goal), 피드백(feedback), 결과(result)
형식을 정의하는 파일


## Action 필수 명령어
```bash
ros2 action -h
```
list, info, send_goal 등이 있다.

### list
```bash
ros2 action list
```
- 현재 ROS2 시스템에서 사용 가능한 모든 액션 목록을 표시
- **이렇게 액션들을 확인할 수 있는 이유는 시뮬레이션 환경을 열 때 액션 서버 노드들이 함께 켜졌기 때문입니다.**


### info
```bash
ros2 action info <action_name>
```
- 특정 액션에 대한 정보를 확인할 때 사용


### send_goal
```bash
ros2 action send_goal <action_name> <action_type> <values>
```
```bash
ros2 action send_goal /play_motion2 play_motion2_msgs/action/PlayMotion2 "{motion_name: 'wave'}"
```
![](/assets/img/Peek_2025-11-08_16-13.gif)


- 인수로 -f 또는 --feedback플래그를 붙이면 피드백 데이터를 모니터링 할 수 있다.
```bash
ros2 action send_goal -f /torso_controller/follow_joint_trajectory control_msgs/action/FollowJointTrajectory "{trajectory: {joint_names: ['torso_lift_joint'], points: [{positions: [0.35], time_from_start: {sec: 3}}]}}"
```
다른 액션들

```bash
# Gripper 닫기
ros2 action send_goal /gripper_controller/follow_joint_trajectory control_msgs/action/FollowJointTrajectory "{trajectory: {joint_names: ['gripper_left_finger_joint', 'gripper_right_finger_joint'], points: [{positions: [0.01, 0.01], time_from_start: {sec: 2}}]}}"

# Gripper 열기
ros2 action send_goal /gripper_controller/follow_joint_trajectory control_msgs/action/FollowJointTrajectory "{trajectory: {joint_names: ['gripper_left_finger_joint', 'gripper_right_finger_joint'], points: [{positions: [0.04, 0.04], time_from_start: {sec: 2}}]}}"

# 로봇 고개를 숙이기
ros2 action send_goal /head_controller/follow_joint_trajectory control_msgs/action/FollowJointTrajectory "{trajectory: {joint_names: ['head_1_joint', 'head_2_joint'], points: [{positions: [0.0, -0.5], time_from_start: {sec: 2}}]}}"

# 로봇 고개를 들기
ros2 action send_goal /head_controller/follow_joint_trajectory control_msgs/action/FollowJointTrajectory "{trajectory: {joint_names: ['head_1_joint', 'head_2_joint'], points: [{positions: [0.0, 0.5], time_from_start: {sec: 2}}]}}"

# 리프트 올리기
ros2 action send_goal /torso_controller/follow_joint_trajectory control_msgs/action/FollowJointTrajectory "{trajectory: {joint_names: ['torso_lift_joint'], points: [{positions: [0.35], time_from_start: {sec: 3}}]}}"

# 리프트 낮추기
ros2 action send_goal /torso_controller/follow_joint_trajectory control_msgs/action/FollowJointTrajectory "{trajectory: {joint_names: ['torso_lift_joint'], points: [{positions: [0.0], time_from_start: {sec: 3}}]}}"
```

