---
title: "Service(1)"
date: 2025-11-05 21:24:00 +0900
categories: [ROBOTICS]
tags: [Robotics, Service]
description: ""
pin: false
math: false
mermaid: false
hidden: true
---

# Service란?
- 노드 간 동기식, 일대일 통신을 위한 메커니즘

-  한 노드가 다른 노드에 특정 작업을 요청하고, 그 결과를 기다리는
방식으로 동작

-  서비스는 클라이언트(Client)와 서버(Server)로 구성
    -  Service Server: 특정 서비스를 제공하는 노드
    -  Service Client: 서비스를 요청하는 노드

- Request-Response 모델을 기반으로 함
    - Request: 클라이언트가 서버에 보내는 데이터 타입
    - Response: 서버가 클라이언트에 응답할 때 보내는 데이터 타입



- 작동 원리
    - 서비스 클라이언트가 요청(Request)을 보내면, 서버가 이를
처리하고 응답(Response)을 반환
    - 클라이언트는 **응답을 받을 때까지 대기** (동기식 통신)


- 동일한 서비스 서버에 대해 여러 클라이언트를
가질 수 있지만,
- **하나의 서비스에 대해 하나의 서버만 가질 수 있음**

- 특징
    - 동기 통신
    - Request-Response 모델
    - 일회성 호출

![](/assets/img/Screenshot_from_2025-11-05_21-37-02.png)

---

### Topic 과 Service의 차이점
topic은 비동기적으로 계속 데이터를 주고 받음.
센서 데이터, 상태 정보를 실시간으로 송수신

service는 요청과 응답이 1대1로 대응, 동기 통신
요청 :사람 얼굴에 대한 raw데이터를 받고, 
응답 :나이, 이름



---
###Interface 란?(복습)

• ROS2에서 노드 간에 주고받는 데이터의 구조를 정의

• Interface는 .msg, .srv, .action 확장자를 가진 텍스트 파일로 정의

• 메시지 (msg): Topic을 통한 단방향 통신에 사용
• 서비스 (srv): 요청-응답 모델의 양방향 통신에 사용
• 액션 (action): 장기 실행 작업을 위한 비동기 양방향 통신에 사용


---

## Service 필수 명령어

```bash
ros2 service -h
```
call, list, type, find 등이 있다.

### list
```bash
ros2 service list
```
- 현재 시스템에서 사용 가능한 모든 서비스 목록을 표시


### call
```
ros2 service call <service_name> <service_type> <value>
```
- 서비스를 호출(요청 보내기)하는 데 사용

### type
```
ros2 service type <service_name>
```
- 서비스가 어떤 인터페이스 타입을 사용하는 지 확인하는 데 사용

ex)
```
ros2 service type /circle
```
`/circle` 서비스가 `std_srvs/srv/Empty`라고 하는 인터페이스로 작동한다는 것을 알 수 있음

-> 요청과 응답 데이터가 없는 것을 볼 수 있습니다. 말 그대로 서비스를 요청하거나 응답을 받을 때 데이터가 포함되지 않는 서비스

```
<request>
---
<response>
```
- 서비스는 위와 같이 요청 부분과 응답 부분으로 나누어져 있음
- `std_srvs/srv/Empty`의 경우에는 둘 다 필요 없는 유형

```
ros2 interface show std_srvs/srv/SetBool
```
- 요청 (request)
    
    → bool type의 data
    
- 응답 (response)
    
    → bool type의 success

    → string type의 message


다시, call

```
ros2 service call /circle std_srvs/srv/Empty
ros2 service call /spin std_srvs/srv/Empty
```
- <service_type>이 std_srvs/srv/Empty이므로 <value>가 필요 없습니다.

![](/assets/img/Screenshot_from_2025-11-05_22-07-33.png)

![](/assets/img/Peek_2025-11-05_22-05.gif)
![](/assets/img/Peek_2025-11-05_22-06.gif)




