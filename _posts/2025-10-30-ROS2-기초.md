---
title: "ROS2 기초"
date: 2025-10-30 18:00:00 +0900
categories: [ROBOTICS]
tags: [Robotics, Topic, Interface]
description: ""
pin: false
math: false
mermaid: false
hidden: true
---


## Topic & Interface

ros2에서는 단위가 안적혀있으면,
속도는 : m/s
각속도(초당회전량) : rad/s
무게 : kg
길이 : m

## --dependencies
```Bash
ros2 pkg create --build-type ament_python tutorial_topic --dependencies rclpy geometry_msgs
```
패키지를 배포할 때, 필요한 패키지는 `--dependencies`를 해야함.
다른 사람들이 빌드했을 때, 오류를 유발할 수 있음.
안하면, rclpy가 없을 때, 오류가 안남. 빌드할 땐 오류가 안나는데, 런타임 중에 오류가 남.

## lidar
![ROS2 스크린샷](/assets/img/Screenshot_from_2025-10-31_15-40-34.png)

![](/assets/img/Screenshot_from_2025-10-31_15-46-57.png)


## 시뮬레이션 실습
### 목표
- TIAGo 로봇의 라이다 센서 데이터를 구독(Subscribe)하고, 이를 바탕으로 로봇의 이동 명령을 발행(Publish)하는 통합 노드 생성
![](/assets/img/Peek_2025-10-31_16-36.gif)


---

## 새로운 Interface 타입 개발은 언제 필요할까?

---

- **기존 인터페이스 타입으로 표현할 수 없는 데이터 구조가 필요할 때**
    - ROS2에서 제공하는 표준 메시지 타입으로 충분하지 않은 경우, 프로젝트에 특화된 데이터를 표현해야 할 때 사용
- **여러 데이터 타입을 하나의 메시지로 묶어야 할 때**
    - 복잡한 센서 데이터나 로봇의 상태 정보 등 여러 종류의 데이터를 하나의 메시지로 전송하고 싶을 때 유용함
- **시스템 간 통신을 위한 특별한 프로토콜이 필요할 때**
    - 특정 애플리케이션이나 하드웨어와의 통신을 위해 커스텀 프로토콜이 필요한 경우에 사용


## Custom Message 만들기
`custom_interfaces`라는 이름의 새 패키지를 생성
단, CMake 패키지여야 함.
파이썬 패키지로 커스텀 인터페이스를 생성할 수 있는 방법은 없음.
``` Bash
ros2 pkg create --build-type ament_cmake custom_interfaces --dependencies rclcpp std_msgs
```

`CMakeLists.txt` 파일 수정

`package.xml` 파일을 수정


패키지 빌드하여 새 인터페이스를 생성
```bash
colcon build --symlink-install --packages-select custom_interfaces
```


## Custom Message를 사용한 프로그래밍
`custom_interface_example`라는 이름의 새 패키지를 생성
```bash
ros2 pkg create --build-type ament_python custom_interface_example --dependencies rclpy custom_interfaces
```

`robot_status_publisher.py` 스크립트 생성

`custom_interface_example/setup.py` 파일을 열고 `entry_points` 섹션에 새로운 노드를 추가


```python
entry_points={
    'console_scripts': [
        'robot_status_publisher = custom_interface_example.robot_status_publisher:main',
    ],
},
```

패키지를 다시 빌드
```bash
colcon build --symlink-install --packages-select custom_interface_example
```

결과 확인
```bash
ros2 run custom_interface_example robot_status_publisher
```

토픽 구독 확인
```bash
ros2 topic echo /robot_status
```


![](/assets/img/Screenshot_from_2025-10-31_17-31-25.png)
